<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>SIGMOD&#x27;22 - Snapper - Paper Notes</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../favicon.svg">
                        <link rel="shortcut icon" href="../favicon.png">
                <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
                <link rel="stylesheet" href="../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
                <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../cover.html">Cover</a></li><li class="chapter-item expanded affix "><a href="../template.html">Template</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="../dbms_machine_provisioning/summary.html"><strong aria-hidden="true">1.</strong> DBMS Workload Modeling &amp; Machine Provisioning</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../dbms_machine_provisioning/sheikh2011bayesian.html"><strong aria-hidden="true">1.1.</strong> ICAC'11 - Modeling Workloads using Gaussian Process</a></li><li class="chapter-item expanded "><a href="../dbms_machine_provisioning/taft2018pstore.html"><strong aria-hidden="true">1.2.</strong> SIGMOD'18 - P-Store</a></li></ol></li><li class="chapter-item expanded "><a href="../dbms_data_partitioning/summary.html"><strong aria-hidden="true">2.</strong> DBMS Data Partitioning</a></li><li class="chapter-item expanded "><a href="../dbms_query_processing/summary.html"><strong aria-hidden="true">3.</strong> DBMS Query Processing</a></li><li class="chapter-item expanded "><a href="../dbms_scalability/summary.html"><strong aria-hidden="true">4.</strong> DBMS Scalability</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../dbms_scalability/lu2019star.html"><strong aria-hidden="true">4.1.</strong> VLDB'19 - Star</a></li><li class="chapter-item expanded "><a href="../dbms_scalability/georgiou2020hihooi.html"><strong aria-hidden="true">4.2.</strong> TKDE'20 - Hihooi</a></li></ol></li><li class="chapter-item expanded "><a href="../deterministic_dbms/summary.html"><strong aria-hidden="true">5.</strong> Deterministic DBMS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../deterministic_dbms/ren2014evaluation.html"><strong aria-hidden="true">5.1.</strong> VLDB'14 - Advantages and Disadvantages of Deterministic DBMS</a></li><li class="chapter-item expanded "><a href="../deterministic_dbms/lu2020aria.html"><strong aria-hidden="true">5.2.</strong> VLDB'20 - Aria</a></li><li class="chapter-item expanded "><a href="../deterministic_dbms/liu2022snapper.html" class="active"><strong aria-hidden="true">5.3.</strong> SIGMOD'22 - Snapper</a></li></ol></li><li class="chapter-item expanded "><a href="../dbms_with_ai/summary.html"><strong aria-hidden="true">6.</strong> DBMS + AI</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../dbms_with_ai/aken2017ottertune.html"><strong aria-hidden="true">6.1.</strong> SIGMOD'17 - OtterTune</a></li><li class="chapter-item expanded "><a href="../dbms_with_ai/marcus2019dlquery.html"><strong aria-hidden="true">6.2.</strong> CIDR'19 - Query Optimizer through DL</a></li><li class="chapter-item expanded "><a href="../dbms_with_ai/zhou2020dbaisurvey.html"><strong aria-hidden="true">6.3.</strong> TKDE'20 - Database Meets AI: A Survey</a></li><li class="chapter-item expanded "><a href="../dbms_with_ai/lin2021mb2.html"><strong aria-hidden="true">6.4.</strong> SIGMOD'21 - MB2</a></li><li class="chapter-item expanded "><a href="../dbms_with_ai/sioulas2021roulette.html"><strong aria-hidden="true">6.5.</strong> SIGMOD'21 - Scalable Multi-Query Execution using Reinforcement Learning</a></li><li class="chapter-item expanded "><a href="../dbms_with_ai/cereda2021cgptuner.html"><strong aria-hidden="true">6.6.</strong> VLDB'21 - CGPTuner</a></li><li class="chapter-item expanded "><a href="../dbms_with_ai/hilprecht2022zeroshot.html"><strong aria-hidden="true">6.7.</strong> CIDR'22 - Zero-Shot Learning on DBMS</a></li><li class="chapter-item expanded "><a href="../dbms_with_ai/yang2022balsa.html"><strong aria-hidden="true">6.8.</strong> SIGMOD'22 - Balsa</a></li><li class="chapter-item expanded "><a href="../dbms_with_ai/butrovich2022tscout.html"><strong aria-hidden="true">6.9.</strong> SIGMOD'22 - TScout</a></li></ol></li><li class="chapter-item expanded "><a href="../rl_to_rank/summary.html"><strong aria-hidden="true">7.</strong> Reinforcement Learning to Rank</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rl_to_rank/zhou2020rlirank.html"><strong aria-hidden="true">7.1.</strong> WWW'20 - RLIRank</a></li></ol></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Paper Notes</h1>

                    <div class="right-buttons">
                                                <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="sigmod22---hybrid-deterministic-and-nondeterministic-execution-of-transactions-in-actor-systems"><a class="header" href="#sigmod22---hybrid-deterministic-and-nondeterministic-execution-of-transactions-in-actor-systems">SIGMOD'22 - Hybrid Deterministic and Nondeterministic Execution of Transactions in Actor Systems</a></h1>
<ul>
<li>Authors: Yijian Liu, Li Su, Vivek Shah, Yongluan Zhou, Marcos Antonio Vaz Salles</li>
<li>Institute: University of Copenhagen, Denmark</li>
<li>Published at SIGMOD'22</li>
<li>Paper Link: <a href="https://dl.acm.org/doi/10.1145/3514221.3526172">https://dl.acm.org/doi/10.1145/3514221.3526172</a></li>
</ul>
<h2 id="background"><a class="header" href="#background">Background</a></h2>
<p>Now there are many applications using actor programming models:</p>
<ul>
<li>Games
<ul>
<li>Halo 4</li>
<li>League of Legends</li>
</ul>
</li>
<li>Telecommunication
<ul>
<li>Ericsson</li>
</ul>
</li>
<li>E-commerce
<ul>
<li>Paypal</li>
<li>Walmart</li>
</ul>
</li>
<li>IoT</li>
</ul>
<p>They have the demand of transactions such as:</p>
<ul>
<li>Purchasing equipment in games</li>
<li>E-commerce</li>
</ul>
<p>To fulfill transaction requirements for actors, Akka introduces <strong>transactors</strong>, which includes the ideas of:</p>
<ul>
<li>Two-phase Locking</li>
<li>Two-phase Commit</li>
<li>Early lock release</li>
</ul>
<p>Actor-oriented Databases (AODBs)</p>
<ul>
<li>Why?</li>
<li>Why not general-purpose DBMS?
<ul>
<li>AODBs are more scalable</li>
</ul>
</li>
<li></li>
</ul>
<h3 id="orleans"><a class="header" href="#orleans">Orleans</a></h3>
<p>Orleans is a framework for actor models. Key features:</p>
<ul>
<li>Virtual actors</li>
<li>Asynchronous message passing
<ul>
<li>But the order of messages is non-deterministic (may be out-of-order)</li>
</ul>
</li>
<li>Reentrancy
<ul>
<li>An actor is allowed to interleave multiple requests when some requests are waiting asynchronous operations.</li>
</ul>
</li>
</ul>
<h2 id="motivation"><a class="header" href="#motivation">Motivation</a></h2>
<p>However, the current design of transactions in actors makes all transactions become distributed transactions, even if the actors are at the same machine. This introduces significant amount of overhead to transactions.</p>
<p>This paper finds that some transactions of actor systems especially fit the idea of determinism, because all the parameters and participating actors are known in advance for those transactions. Determinism can greatly reduce the overhead of actor systems.</p>
<p>But, some other transactions still need to be executed non-deterministically, so how to make both execution work in a single system become a challenge.</p>
<h2 id="problem"><a class="header" href="#problem">Problem</a></h2>
<p>To design an architecture that can execute transactions in an actor system in both deterministic and non-deterministic modes.</p>
<p>A transaction is defined as a series of method invocation to multiple actors issued by an actor and requires <strong>conflict serializability</strong> and <strong>durability</strong>.</p>
<h3 id="assumptions"><a class="header" href="#assumptions">Assumptions</a></h3>
<p>Environments:</p>
<ul>
<li>Single machine</li>
<li>Actor models</li>
</ul>
<p>A transaction executed in the deterministic mode must provide:</p>
<ul>
<li>The main actor (who issue the transaction)</li>
<li>The first method to be invoked and corresponding inputs</li>
<li>The set of actors that this transaction is going to access</li>
</ul>
<h2 id="method"><a class="header" href="#method">Method</a></h2>
<h3 id="system-architecture"><a class="header" href="#system-architecture">System Architecture</a></h3>
<ul>
<li>Coordinator actors</li>
<li>Transactional actors </li>
<li>Loggers
<ul>
<li>Multiple loggers</li>
<li>Each logger has its own log file</li>
<li>Transactional actors sends its log to one of loggers decided by a simple hash function</li>
</ul>
</li>
</ul>
<h2 id="experiments"><a class="header" href="#experiments">Experiments</a></h2>
<h3 id="base-settings"><a class="header" href="#base-settings">Base Settings</a></h3>
<ul>
<li>Environments
<ul>
<li>AWS EC2
<ul>
<li>4-core 3.0 GHz CPU</li>
<li>10.5 GB Memory</li>
<li>16GB SSD with 8K IOPS</li>
</ul>
</li>
</ul>
</li>
<li>Benchmarks
<ul>
<li>TPC-C
<ul>
<li>Only NewOrder transactions</li>
<li>Each warehouse is an actor, and the stock table is partitioned into multiple actors</li>
</ul>
</li>
<li>SmallBank
<ul>
<li>Add a new type: MultiTransfer transactions - transferring money from one account to multiple accounts</li>
<li>Each account is an actor</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="pact-vs-act"><a class="header" href="#pact-vs-act">PACT vs. ACT</a></h3>
<h4 id="impact-of-transaction-size"><a class="header" href="#impact-of-transaction-size">Impact of Transaction Size</a></h4>
<p>Varying transaction sizes with SmallBank's MultiTransfer transactions.</p>
<p>Throughput (Fig.12)</p>
<ul>
<li>Low transaction size -&gt; low contention
<ul>
<li>PACT needs more message exchanges -&gt; slower -&gt; lower throughput</li>
</ul>
</li>
<li>High transaction size -&gt; high contention
<ul>
<li>ACT aborts more transactions -&gt; lower throughput</li>
</ul>
</li>
<li>Logging
<ul>
<li>PACT can write logs in batches due to deterministic batching -&gt; more efficient</li>
</ul>
</li>
</ul>
<p>Latency (Fig.13)</p>
<ul>
<li>PACT's medium latency is almost the same as ACT's
<ul>
<li>Only when size = 64, PACT has higher medium latency due to the delay of batching</li>
</ul>
</li>
<li>ACT has higher 99th latency because of dynamic reordering of non-deterministic locking</li>
</ul>
<p>Conclusion</p>
<ul>
<li>PACT has more predictable latency and higher throughput in high contention workloads</li>
<li>ACT does better only in low contention workloads</li>
</ul>
<h4 id="impact-of-workload-skewness-fig14"><a class="header" href="#impact-of-workload-skewness-fig14">Impact of Workload Skewness (Fig.14)</a></h4>
<p>Deciding the keys/actors of transactions using Zipfian distribution with varying parameters. It also compares PACT &amp; ACT with Orleans' Txn. Orleans' Txn is basically ACT but with early lock release and timeout deadlock avoidance.</p>
<ul>
<li>Orleans' Txn loses in all kind of workloads even without deadlocks (explained in the next section)</li>
<li>ACT has lower throughput in higher skewness which makes sense.</li>
<li>PACT has higher throughput in higher skewness because batching become more efficient.</li>
</ul>
<h4 id="comparing-act-with-orleans-txn-fig15"><a class="header" href="#comparing-act-with-orleans-txn-fig15">Comparing ACT with Orleans' Txn (Fig.15)</a></h4>
<p>Comparing the latency of ACT with Orleans' Txn using a special type of transactions, each of that may do NO-OP to actors to test the overhead of maintaining a transaction in both systems.</p>
<ul>
<li>OrleansTxn has higher overhead in calling an actor and 2PC.</li>
</ul>
<h3 id="hybrid-execution-fig16"><a class="header" href="#hybrid-execution-fig16">Hybrid Execution (Fig.16)</a></h3>
<p>Running SmallBank with transaction size = 4</p>
<p>Throughput</p>
<ul>
<li>Hybrid execution yields lower throughput than the expectation. Reasons:
<ul>
<li>PACTs force ACTs to wait for batch processing</li>
<li>PACTs are blocked until the previous ACTs are committed</li>
<li>ACTs aborts more due to conflict with PACTs</li>
</ul>
</li>
<li>This situation becomes worse in high-skewed workloads</li>
</ul>
<p>Latency</p>
<ul>
<li>PACTs generally have higher latencies</li>
<li>As PACTs become less, PACTs run faster because of smaller batches, which has lower possibility to be blocked.</li>
<li>As ACTs become less, more long-latency ACTs are aborted due to higher possibility to conflict with PACTs.</li>
</ul>
<p>Aborts</p>
<ul>
<li>Most aborts come from read/write conflict of ACTs and serialiability check between PACTs and ACTs.</li>
</ul>
<h3 id="scalability-fig17"><a class="header" href="#scalability-fig17">Scalability (Fig.17)</a></h3>
<p>SmallBanks</p>
<ul>
<li>PACTs have better scalability in skewed workloads</li>
<li>All methods scale linearly</li>
</ul>
<p>TPC-C</p>
<ul>
<li>PACTs have better scalability in skewed workloads</li>
<li>All methods scale linearly</li>
<li>PACTs and ACTs have much lower throughput than NT due to inefficient logging methods.</li>
</ul>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<h2 id="questions"><a class="header" href="#questions">Questions</a></h2>
<ul>
<li>❓ What are 'transactors'? why do we need them?</li>
<li>❓ How does this paper make deterministic and non-deterministic execution co-exist in a single system?</li>
<li>❓ Why does Orleans use 'virtual actors'?</li>
<li>❓ Conflict Serializability</li>
<li>❓ How to ensure serializability while deterministic and non-deterministic txns are presented?
<ul>
<li>See the example in Figure 8</li>
</ul>
</li>
<li>❓ Why did you use hybrid execution instead of non-deterministic only?</li>
<li>❓ How often do deadlocks happen in hybrid execution? Looks like it is a big problem.</li>
<li>❓ Do batch IDs of PACTs and txn IDs of ACTs come from the same counter?</li>
<li>❓ Does DBMS have the cases of non-serializable transactions not due to deadlocks?</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../deterministic_dbms/lu2020aria.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../dbms_with_ai/summary.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../deterministic_dbms/lu2020aria.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../dbms_with_ai/summary.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
