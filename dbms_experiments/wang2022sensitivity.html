<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>VLDB&#x27;22 - A Study of Database Performance Sensitivity to Experiment Settings - Paper Notes</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../favicon.svg">
                        <link rel="shortcut icon" href="../favicon.png">
                <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
                <link rel="stylesheet" href="../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
                <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../cover.html">Cover</a></li><li class="chapter-item expanded affix "><a href="../template.html">Template</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="../dbms_machine_provisioning/summary.html"><strong aria-hidden="true">1.</strong> DBMS Workload Modeling &amp; Machine Provisioning</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../dbms_machine_provisioning/sheikh2011bayesian.html"><strong aria-hidden="true">1.1.</strong> ICAC'11 - Modeling Workloads using Gaussian Process</a></li><li class="chapter-item expanded "><a href="../dbms_machine_provisioning/taft2018pstore.html"><strong aria-hidden="true">1.2.</strong> SIGMOD'18 - P-Store</a></li></ol></li><li class="chapter-item expanded "><a href="../dbms_data_partitioning/summary.html"><strong aria-hidden="true">2.</strong> DBMS Data Partitioning</a></li><li class="chapter-item expanded "><a href="../dbms_query_processing/summary.html"><strong aria-hidden="true">3.</strong> DBMS Query Processing</a></li><li class="chapter-item expanded "><a href="../dbms_scalability/summary.html"><strong aria-hidden="true">4.</strong> DBMS Scalability</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../dbms_scalability/lu2019star.html"><strong aria-hidden="true">4.1.</strong> VLDB'19 - Star</a></li><li class="chapter-item expanded "><a href="../dbms_scalability/georgiou2020hihooi.html"><strong aria-hidden="true">4.2.</strong> TKDE'20 - Hihooi</a></li></ol></li><li class="chapter-item expanded "><a href="../deterministic_dbms/summary.html"><strong aria-hidden="true">5.</strong> Deterministic DBMS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../deterministic_dbms/ren2014evaluation.html"><strong aria-hidden="true">5.1.</strong> VLDB'14 - Advantages and Disadvantages of Deterministic DBMS</a></li><li class="chapter-item expanded "><a href="../deterministic_dbms/lu2020aria.html"><strong aria-hidden="true">5.2.</strong> VLDB'20 - Aria</a></li><li class="chapter-item expanded "><a href="../deterministic_dbms/liu2022snapper.html"><strong aria-hidden="true">5.3.</strong> SIGMOD'22 - Snapper</a></li></ol></li><li class="chapter-item expanded "><a href="../dbms_with_ai/summary.html"><strong aria-hidden="true">6.</strong> DBMS + AI</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../dbms_with_ai/aken2017ottertune.html"><strong aria-hidden="true">6.1.</strong> SIGMOD'17 - OtterTune</a></li><li class="chapter-item expanded "><a href="../dbms_with_ai/marcus2019dlquery.html"><strong aria-hidden="true">6.2.</strong> CIDR'19 - Query Optimizer through DL</a></li><li class="chapter-item expanded "><a href="../dbms_with_ai/zhou2020dbaisurvey.html"><strong aria-hidden="true">6.3.</strong> TKDE'20 - Database Meets AI: A Survey</a></li><li class="chapter-item expanded "><a href="../dbms_with_ai/lin2021mb2.html"><strong aria-hidden="true">6.4.</strong> SIGMOD'21 - MB2</a></li><li class="chapter-item expanded "><a href="../dbms_with_ai/sioulas2021roulette.html"><strong aria-hidden="true">6.5.</strong> SIGMOD'21 - Scalable Multi-Query Execution using Reinforcement Learning</a></li><li class="chapter-item expanded "><a href="../dbms_with_ai/cereda2021cgptuner.html"><strong aria-hidden="true">6.6.</strong> VLDB'21 - CGPTuner</a></li><li class="chapter-item expanded "><a href="../dbms_with_ai/hilprecht2022zeroshot.html"><strong aria-hidden="true">6.7.</strong> CIDR'22 - Zero-Shot Learning on DBMS</a></li><li class="chapter-item expanded "><a href="../dbms_with_ai/yang2022balsa.html"><strong aria-hidden="true">6.8.</strong> SIGMOD'22 - Balsa</a></li><li class="chapter-item expanded "><a href="../dbms_with_ai/butrovich2022tscout.html"><strong aria-hidden="true">6.9.</strong> SIGMOD'22 - TScout</a></li></ol></li><li class="chapter-item expanded "><a href="../dbms_experiments/summary.html"><strong aria-hidden="true">7.</strong> DBMS Experiments</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../dbms_experiments/wang2022sensitivity.html" class="active"><strong aria-hidden="true">7.1.</strong> VLDB'22 - A Study of Database Performance Sensitivity to Experiment Settings</a></li></ol></li><li class="chapter-item expanded "><a href="../rl_to_rank/summary.html"><strong aria-hidden="true">8.</strong> Reinforcement Learning to Rank</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rl_to_rank/zhou2020rlirank.html"><strong aria-hidden="true">8.1.</strong> WWW'20 - RLIRank</a></li></ol></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Paper Notes</h1>

                    <div class="right-buttons">
                                                <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="vldb22---a-study-of-database-performance-sensitivity-to-experiment-settings"><a class="header" href="#vldb22---a-study-of-database-performance-sensitivity-to-experiment-settings">VLDB'22 - A Study of Database Performance Sensitivity to Experiment Settings</a></h1>
<ul>
<li>Authors: Yang Wang, Miao Yu, Yujie Hui, Fang Zhou, Yuyang Huang, Rui Zhu, Xueyuan Ren, Tianxi Li, Xiaoyi Lu</li>
<li>Institute: The Ohio State University</li>
<li>Published at VLBD'22</li>
<li>Paper Link: <a href="https://dl.acm.org/doi/abs/10.14778/3523210.3523221">https://dl.acm.org/doi/abs/10.14778/3523210.3523221</a></li>
</ul>
<h2 id="background"><a class="header" href="#background">Background</a></h2>
<p>Many DBMS articles compare their systems with other baselines using the TPC-C benchmarks or YCSB, but these benchmarks have many tunable parameters.</p>
<h2 id="motivation--problem"><a class="header" href="#motivation--problem">Motivation &amp; Problem</a></h2>
<p>This paper tries to find out &quot;how sensitive are their evaluation results to these parameters and will their conclusions hold under a different setting?&quot;</p>
<h2 id="method"><a class="header" href="#method">Method</a></h2>
<h3 id="reproduced-systems"><a class="header" href="#reproduced-systems">Reproduced Systems</a></h3>
<p>They use the source code from the original paper to reproduce the system. A system is considered as reproduced as long as:</p>
<ol>
<li>The reproduced numbers are reasonably close to those in the corresponding article or have an explainable deviation</li>
<li>the conclusion of the article still holds</li>
</ol>
<p>Reproduced systems list:</p>
<ul>
<li>Transactional DBMSs
<ul>
<li>Focusing on multi-core single-machine
<ul>
<li>Silo</li>
<li>Cicada</li>
</ul>
</li>
<li>Focusing on distributed transactions
<ul>
<li>Using RDMA
<ul>
<li>DrTM</li>
<li>GAM</li>
</ul>
</li>
<li>Without using RDMA
<ul>
<li>Focusing on geo-distributed databases
<ul>
<li>TAPIR</li>
<li>Janus</li>
</ul>
</li>
<li>Not especially focusing on geo-distributed env.
<ul>
<li>Calvin</li>
<li>Star</li>
<li>Aria</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Key-value DBMSs
<ul>
<li>HERD</li>
<li>MICA</li>
</ul>
</li>
</ul>
<h2 id="experiments"><a class="header" href="#experiments">Experiments</a></h2>
<h3 id="the-tpc-c-benchmarks"><a class="header" href="#the-tpc-c-benchmarks">The TPC-C Benchmarks</a></h3>
<p>They tried to answer the following questions:</p>
<ul>
<li>Considering commercial systems are tested with <strong>wait time</strong> and research prototypes are not, how much difference does it make?</li>
<li>Comparing to commercial systems, most research prototypes are tested with a small number of warehouses. What is the impact of <strong>the number of warehouses</strong>?</li>
<li>Different prototypes are evaluated under different degrees of concurrency. Will their conclusions still hold under a different <strong>degree of concurrency</strong>?</li>
<li>What is the difference between running transactions as <strong>stored procedures</strong> and running them as interactive SQL transactions?</li>
<li>Considering some research prototypes only run two types of transactions (i.e. New-Order and Payment), what is <strong>the impact of the remaining three types</strong>?</li>
</ul>
<h4 id="impact-of-wait-time"><a class="header" href="#impact-of-wait-time">Impact of Wait Time</a></h4>
<p>Key Findings</p>
<ul>
<li>Due to the restriction of wait time (21 seconds in average) and number of clients (10) to each warehouse, the upper bound of expected throughput is 0.48 txns/sec per warehouse.</li>
<li>With wait time
<ul>
<li>Almost no contention</li>
<li>Bottleneck becomes I/O</li>
</ul>
</li>
<li>Most systems focus on improving performance under contention, so it is not suitable for them to use wait time.</li>
</ul>
<h4 id="impact-of-contention-level"><a class="header" href="#impact-of-contention-level">Impact of Contention Level</a></h4>
<p>Key factors for contention</p>
<ul>
<li>Number of warehouses (with a fixed number of clients)</li>
<li>Number of clients (with a fixed number of warehouses)</li>
<li>Percentage of cross-warehouse transactions
<ul>
<li>Cross-warehouse transactions have higher chance to contend with more transactions</li>
</ul>
</li>
</ul>
<p>Key findings</p>
<ul>
<li>Whether adjusting contention level by changing the number of warehouses work depends on if contention is a bottleneck (check by if the CPU is underutilized)
<ul>
<li>If contention is a bottleneck, it does work.</li>
<li>If contention is not a bottleneck (e.g., Silo, DrTM, and GAM), increasing the number of warehouses causes the throughput decreases.</li>
</ul>
</li>
<li>Many systems are sensitive to the number of warehouses. This may change the conclusions of the papers.
<ul>
<li>E.g., Aria outperforms Calvin in low contention environment, but not in high contention env.</li>
</ul>
</li>
</ul>
<h4 id="impact-of-network-and-disk-io"><a class="header" href="#impact-of-network-and-disk-io">Impact of Network and Disk I/O</a></h4>
<p>Key solutions to avoid I/O impact throughput:</p>
<ul>
<li>Faster I/O: using fast hardware and mechanisms, e.g., RDMA</li>
<li>Smart scheduling: e.g., early lock release</li>
<li>Separate I/O: e.g., Calvin decouples replicating transactions from transaction execution</li>
</ul>
<p>Experiments (Figure 3) show that I/O impacts scalability.</p>
<h4 id="impact-of-not-using-stored-procedures"><a class="header" href="#impact-of-not-using-stored-procedures">Impact of Not using Stored Procedures</a></h4>
<p>Challenges of using interactive SQL statements:</p>
<ul>
<li>Hard to know read-/write-set in advance</li>
<li>Adding more network round-trips</li>
<li>Adding overhead of parsing SQLs</li>
</ul>
<p>Key findings (Figure 4)</p>
<ul>
<li>Using stored procedures is much faster</li>
<li>However, increasing concurrency level (e.g., increasing number of warehouses) can hide the above cost since it is easier to pipeline transactions.</li>
</ul>
<p>Finding read-/write-set from interactive SQL statements is an interesting research direction.</p>
<h4 id="impact-fo-transaction-types"><a class="header" href="#impact-fo-transaction-types">Impact fo Transaction Types</a></h4>
<p>Key findings (Figure 5)</p>
<ul>
<li>Using only New-Order and Payment can singnificantly increase throughput to most of systems</li>
<li>However, it is not the case for Janus because
<ul>
<li>the bottleneck of Janus is not CPU</li>
<li>New-Order and Payment may have cross-warehouse behavior which increases the overhead</li>
</ul>
</li>
</ul>
<h4 id="summary-of-tpc-c"><a class="header" href="#summary-of-tpc-c">Summary of TPC-C</a></h4>
<p>Tuning guidelines</p>
<ul>
<li>Test disk throughput =&gt; ensure data does not fit into DRAM</li>
<li>Test network stack =&gt; run interactive transactions, 2PC, Paxos with low contention (many warehouses, but fit into DRAM)</li>
<li>Test concurrency control =&gt; high contention (low number of warehouses)</li>
</ul>
<h3 id="the-yahoo-cloud-serving-benchmarks-ycsb"><a class="header" href="#the-yahoo-cloud-serving-benchmarks-ycsb">The Yahoo! Cloud Serving Benchmarks (YCSB)</a></h3>
<p>They tried to answer the following questions:</p>
<ul>
<li>Since some systems have network stacks and some do not, how does network stack affect the result?</li>
<li>How does the skewness of keys in the workload affect the result?</li>
<li>How do the number and size of KV pairs affect the result?</li>
<li>How does the read/write ratio affect the result?</li>
</ul>
<h4 id="impact-of-network-stack"><a class="header" href="#impact-of-network-stack">Impact of Network Stack</a></h4>
<p>Key findings:</p>
<ul>
<li>(Table 3) Network stack efficiency: RDMA &gt; DPDK &gt; TCP/UDP</li>
<li>(Figure 6d) Large KVs with RDMA may be slow for reading records since reading requires using RDMA SEND, which is slower than RDMA WRITE.</li>
</ul>
<h4 id="impact-of-skewness"><a class="header" href="#impact-of-skewness">Impact of Skewness</a></h4>
<p>Key findings:</p>
<ul>
<li>(Figure 6a, 6b) High skewness makes the systems having concurrency control slower.
<ul>
<li>(Figure 6d, 6e) But not for the systems that do not need currency control (H-Store-like design), it only causes load imbalances. (Note that there is no transaction in YCSB)</li>
</ul>
</li>
</ul>
<h4 id="impact-of-number-of-kvs"><a class="header" href="#impact-of-number-of-kvs">Impact of Number of KVs</a></h4>
<p>Key findings:</p>
<ul>
<li>(Figure 6a, 6b) the impact of number of KVs is not significant.
<ul>
<li>(Figure 7) This is due to the design of Zipfian distribution. Even if raising the number of KVs from 1M to 100M, the frequency of accessing the hottest key only decreases from 6.5% to 4.8%.</li>
</ul>
</li>
</ul>
<h4 id="impact-of-readwrite-ratio"><a class="header" href="#impact-of-readwrite-ratio">Impact of Read/Write Ratio</a></h4>
<p>Key findings:</p>
<ul>
<li>(Figure 6a, 6c) more writes =&gt; slower
<ul>
<li>since reads can be processed concurrently</li>
</ul>
</li>
<li>Some systems that need to replicate writes (e.g., Star) gets higher impact with higher write ratio.</li>
</ul>
<h4 id="summary-of-ycsb"><a class="header" href="#summary-of-ycsb">Summary of YCSB</a></h4>
<p>Tuning guidelines</p>
<ul>
<li>Test network bandwidth =&gt; using large KVs with low contention</li>
<li>Test network stack =&gt; using small KVs with low contention</li>
<li>Test KV lookup speed =&gt; using small KVs with low contention but batching requests</li>
<li>Test concurrency control =&gt; high contention</li>
</ul>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<h2 id="questions"><a class="header" href="#questions">Questions</a></h2>
<ul>
<li>How does Janus decouple I/O from critical sections?</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../dbms_experiments/summary.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../rl_to_rank/summary.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../dbms_experiments/summary.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../rl_to_rank/summary.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
